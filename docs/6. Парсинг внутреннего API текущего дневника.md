**Парсинг** - достаточно интересный момент с точки зрения разработки.

Парсинг всегда начинается с анализа. Мы должны проанализировать каким образом сайт получает данные:

1. Открываем вкладку сеть в параметрах для разработчиков в любом браузере (F12 для Chrome) и обновляем страницу. 

![[Pasted image 20240831013407.png]]

2. После этих действий мы увидим загрузку многих компонентов, но нас интересуют только **"Fetch/XHR"**, поэтому поставим соответствующий фильтр.

3. После этого мы увидим подобные запросы

![[Pasted image 20240831013512.png]]

4. Анализируем запрос

![[Pasted image 20240831013643.png]]

В заголовках запроса нам важны (пригодятся позже):

- URL Запроса (в нашем случае "https://es.ciur.ru/api/ProfileService/GetPersonData")
- Тип запроса (в нашем случае "POST")

5. Попробуем повторить запрос через библиотеку "requests" для python.

``` python
# Импортируем библиотеку
import requests

# Осуществляем запрос и приваиваем ему переменную r
r = requests.post(url="https://es.ciur.ru/api/ProfileService/GetPersonData")

# Выводим статус запроса
print(r.status_code)

# Выводим ответ
print(r.text)
```

Получаем ошибку **403** (Доступ запрещен), что не удивительно, ведь для авторизации нам необходимы *cookie* пользователя, мы можем скопировать их из тех же параметров запроса в браузере.

6. Дописываем код, для использования cookie:

``` python
# Импортируем библиотеку
import requests

# Запишем cookie в переменную
cookie = 'мои-куки-скрыты'

# Осуществляем запрос и приваиваем ему переменную r
r = requests.post(url="https://es.ciur.ru/api/ProfileService/GetPersonData", headers={'cookie': cookie})

# Выводим статус запроса
print(r.status_code)

# Выводим ответ (json, т. к. ответ сервера записан в формате JSON)
print(r.json())
```

Получаем большой ответ, в формате JSON.
